<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>NovaChat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- FONTS: basis nu, CSS verfijnt dit later -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- =========================
     LOGIN SCREEN
========================= -->
<div id="loginScreen" class="overlay fullscreen">

  <div class="contact-container">

    <div class="contact-header">
      <div class="contact-header-left">
        <div class="contact-icon">ğŸ‘¤</div>
        <div class="contact-header-text">
          <h2>Welcome</h2>
          <p>Login or create an account</p>
        </div>
      </div>
    </div>

    <div class="contact-body">

      <div class="contact-section">
        <h3>Username</h3>
        <div class="contact-input-wrapper">
          <input id="loginUsername" placeholder="username" />
        </div>
      </div>

      <div class="contact-section">
        <h3>Code</h3>
        <div class="contact-input-wrapper">
          <input
  id="userCode"
  type="text"
  placeholder="Auto-generated code"
  class="contact-input-wrapper"
/>

        </div>
      </div>

<div class="contact-section">
        <h3>Password</h3>
        <div class="contact-input-wrapper">
          <input
  id="loginPassword"
  type="password"
  placeholder="password"
/>

        </div>
      </div>



      <div class="contact-section">
        <button id="loginBtn" type="button" class="contact-action-btn">
          Login
        </button>
      </div>

      <div class="contact-section subtle">
        <button id="signupBtn" type="button "class="contact-action-btn">
          Create new account
        </button>
      </div>

      

    </div>

  </div>

</div>


  <!-- BACKGROUND LAYERS -->
  <div class="bg-gradient"></div>
  <div class="bg-noise"></div>
  <div class="bg-orb orb-1"></div>
  <div class="bg-orb orb-2"></div>
  <div class="bg-orb orb-3"></div>

  <!-- APP ROOT -->
  <div class="app-shell">


    <!-- =========================
         SIDEBAR
    ========================== -->
    <aside class="sidebar">

      <!-- BRAND -->
      <div class="sidebar-top">
        <div class="brand">
          <div class="brand-icon"></div>
          <div class="brand-text">
            <span class="brand-name">NovaChat</span>
            <span class="brand-sub">Private messaging</span>
          </div>
        </div>
      </div>

      <!-- USER CARD -->
    

      <!-- SEARCH -->
      <section class="sidebar-search">
        <div class="search-field">
          <span class="search-icon">âŒ•</span>
          <input
            id="searchInput"
            type="text"
            placeholder="Search or start a new conversation"
            autocomplete="off"
          />
        </div>
      </section>

      <!-- CHAT LIST -->
      <section class="chat-list-section">
        <div class="chat-list"></div>

        <!-- EMPTY STATE -->
        <div class="chat-list-empty">
          <div class="empty-visual">ğŸ’¬</div>
          <div class="empty-title">No conversations</div>
          <div class="empty-sub">
            Start a new chat to see it appear here
          </div>
        </div>
      </section>

      <!-- FOOTER ACTIONS -->
<section class="sidebar-footer">
  <button class="footer-btn settings-btn">
    <span class="settings-icon">âš™</span>
    <span class="settings-label">Settings</span>
  </button>

  <button class="footer-btn add-contact-btn">
    <span class="settings-icon">â•</span>
    <span class="settings-label">Add Contact</span>
  </button>
</section>



    </aside>

    <!-- =========================
         MAIN CHAT AREA
    ========================== -->
    <main class="chat-area">

      <!-- HEADER -->
   <header class="chat-header">
  <div class="chat-header-left">
    <div class="chat-avatar-large"></div>

    <div class="chat-header-text">
      <div class="chat-title"></div>
      <div class="chat-subtitle"></div>
    </div>
  </div>

  <div class="chat-header-actions">
    <button class="icon-btn call-btn" title="Voice call">ğŸ“</button>
    <button class="icon-btn video-btn" title="Video call">ğŸ¥</button>
    <button class="icon-btn menu-btn" title="Menu">â‹®</button>
  </div>
</header>


      <!-- MESSAGES -->
      <section class="messages empty">

        <!-- EMPTY STATE -->
        <div class="messages-empty">
          <div class="empty-visual">ğŸ“¡</div>
          <div class="empty-title">No messages yet</div>
          <div class="empty-sub">
            Send a message to start the conversation
          </div>
        </div>

        <!-- MESSAGE TEMPLATE (JS) -->
        <!--
        <div class="message outgoing">
          <div class="message-bubble">
            <p class="message-text">Hello</p>
          </div>
          <div class="message-meta">
            <span class="message-time">20:31</span>
          </div>
        </div>
        -->

      </section>

      <!-- INPUT -->
      <footer class="chat-input-area disabled">

        <div class="input-surface">

          <div class="input-actions left">
            <button class="icon-btn emoji-btn">ğŸ˜Š</button>
            <button class="icon-btn attach-btn">ğŸ“</button>
          </div>

          <div class="input-field-wrapper">
            <input
              id="messageInput"
              type="text"
              placeholder="Type a messageâ€¦"
              autocomplete="off"
            />
          </div>

          <div class="input-actions right">
            <button class="send-btn">
              <span class="send-icon">â¤</span>
            </button>
          </div>

        </div>

      </footer>

    </main>

  </div>

  <!-- =========================
     SETTINGS SCREEN (FULL)
========================= -->
<div id="settingsScreen" class="overlay fullscreen hidden">
  <div class="settings-container">
    <div class="settings-header">
      <h2>Settings</h2>
      <button class="icon-btn close-settings">âœ•</button>
    </div>

      <div class="settings-content">

    <div class="settings-section">
  <h3>Your Profile</h3>
  <div class="settings-item profile-info">
    <span id="settingsMyTag">Loading...</span>
    <small>This is your unique ID</small>
  </div>

  <!-- Nieuwe sectie: Edit Profile -->
<div class="settings-section">
  <h3>Edit Profile</h3>
  <div class="settings-item profile-edit-container">
    <div class="edit-avatar-group">
      <div id="pfpPreview" class="chat-avatar-large"></div>
      <input type="file" id="profilePicInput" accept="image/*" style="display:none;" onchange="previewProfilePic(this)">
      <button class="icon-btn" onclick="document.getElementById('profilePicInput').click()">ğŸ“¸</button>
    </div>

    <div class="contact-input-wrapper" style="margin-top: 15px;">
      <input type="text" id="editDisplayName" placeholder="Display Name">
    </div>

    <div class="contact-input-wrapper" style="margin-top: 10px;">
      <textarea id="editBio" placeholder="Tell something about yourself..." style="width: 100%; background: transparent; border: none; color: white; padding: 10px; outline: none; resize: none;"></textarea>
    </div>

    <button class="contact-action-btn" style="margin-top: 15px;" onclick="saveProfileData()">Save Changes</button>
  </div>
</div>
  <div class="settings-item danger" onclick="logout()">Logout</div>
</div>

 <div class="settings-section">
  <h3>Appearance</h3>
  <div class="settings-item" onclick="applyTheme('dark')">
    <strong>Nova Dark</strong>
    <small>Default futuristic look</small>
  </div>
  <div class="settings-item" onclick="applyTheme('light')">
    <strong>Crystal Light</strong>
    <small>Clean and bright</small>
  </div>
  <div class="settings-item" onclick="applyTheme('midnight')">
    <strong>OLED Midnight</strong>
    <small>Pure black and neon</small>
  </div>
</div>

  
<div class="settings-section">
  <h3>Chat Customization</h3>
  
  <!-- Chat Background Upload -->
  <div class="settings-item">
    <div class="settings-text">
      <strong>Achtergrond Afbeelding</strong>
      <small>Upload een eigen foto voor de chat</small>
    </div>
    <div class="settings-actions">
      <input type="file" id="bgUpload" accept="image/*" style="display: none;" onchange="handleBgUpload(this)">
      <button class="icon-btn" onclick="document.getElementById('bgUpload').click()">ğŸ“</button>
      <button class="icon-btn danger" onclick="removeChatBackground()">âœ•</button>
    </div>
  </div>

  <!-- Message Density Slider -->
  <div class="settings-item density-control">
    <div class="settings-text">
      <strong>Bericht Dichtheid</strong>
      <small>Sleep om de witruimte aan te passen</small>
    </div>
    <input 
      type="range" 
      id="densitySlider" 
      min="4" max="40" value="20" 
      oninput="updateDensity(this.value)"
    >
  </div>
</div>

  <!-- Read Receipts -->
  <div class="settings-item">
    <div class="settings-text">
      <strong>Read Receipts</strong>
      <small>Laat anderen zien dat je hun bericht hebt gelezen</small>
    </div>
    <label class="switch">
      <input type="checkbox" id="readReceiptToggle" onchange="updateReadReceipts(this.checked)" checked>
      <span class="slider"></span>
    </label>
  </div>


<div class="settings-section">
  <h3>Privacy & Security</h3>

  <!-- Chat Lock -->
  <div class="settings-item">
    <div class="settings-text">
      <strong>Chat Lock</strong>
      <small>Vraag om een pincode bij het openen van de app</small>
    </div>
    <label class="switch">
      <input type="checkbox" id="lockToggle" onchange="toggleChatLock(this.checked)">
      <span class="slider"></span>
    </label>
  </div>

  <!-- Last Seen -->
  <div class="settings-item">
    <div class="settings-text">
      <strong>Laatst Gezien</strong>
      <small>Anderen kunnen niet zien wanneer je online bent</small>
    </div>
    <label class="switch">
      <input type="checkbox" id="lastSeenToggle" onchange="toggleLastSeen(this.checked)">
      <span class="slider"></span>
    </label>
  </div>

  <!-- Blocked Contacts -->
  <div class="settings-item blocklist-item">
    <div class="settings-text">
      <strong>Geblokkeerde Contacten</strong>
      <small id="blockedCount">0 personen geblokkeerd</small>
    </div>
    <button class="icon-btn" onclick="openBlockManager()">â”</button>
  </div>
</div>

<!-- Extra kleine popup voor Block Manager (optioneel, maar netjes) -->
<div id="blockManager" class="overlay hidden">
    <div class="contact-container" style="width: 350px;">
        <div class="contact-header">
            <h3>Blokkeerlijst</h3>
            <button class="icon-btn" onclick="closeBlockManager()">âœ•</button>
        </div>
        <div id="blockListArea" style="max-height: 200px; overflow-y: auto; margin: 15px 0;">
            <!-- Hier komen de namen -->
        </div>
        <div class="contact-input-wrapper">
            <input type="text" id="blockInput" placeholder="username@1234">
            <button onclick="blockUserFromInput()" style="background: var(--accent); border:none; padding: 5px 10px; border-radius: 8px; margin-top: 5px; cursor: pointer;">Blokkeer</button>
        </div>
    </div>
    </div>
  </div>
    </div>
</div>

<!-- =========================
     CALL WINDOW
========================= -->
<div id="callWindow" class="popup call hidden">
  <h3>Voice Call</h3>
  <button class="call-action">Start Call</button>
</div>

<!-- =========================
     VIDEO CALL WINDOW
========================= -->
<div id="videoWindow" class="popup video hidden">
  <h3>Video Call</h3>
  <button class="call-action video">Start Video</button>
</div>

<!-- =========================
     CONTACT MENU (3 DOTS)
========================= -->
<div id="contactMenu" class="popup menu hidden">
  <div class="menu-item">View profile</div>
  <div class="menu-item">Mute notifications</div>
  <div class="menu-item">Search in chat</div>
  <div class="menu-item danger">Block contact</div>
</div>

<!-- =========================
     ADD CONTACT SCREEN
========================= -->
<div id="addContactScreen" class="overlay fullscreen hidden">
  <div id="addContactStatus" class="status-text"></div>


  <div class="contact-container">

    <!-- HEADER -->
    <div class="contact-header">
      <div class="contact-header-left">
        <div class="contact-icon">â•</div>
        <div class="contact-header-text">
          <h2>Add Contact</h2>
          <p>Connect using a unique username</p>
        </div>
      </div>

      <button class="icon-btn close-add-contact">âœ•</button>
    </div>

    <!-- BODY -->
    <div class="contact-body">

      <!-- INPUT SECTION -->
      <div class="contact-section">
        <h3>Username</h3>
        <p class="contact-hint">
          Enter a username followed by a unique code
        </p>

        <div class="contact-input-wrapper">
          <input
            id="actualAddContactInput"         
            type="text"
            placeholder="username@AB12"
            autocomplete="off"
          />
        </div>
      </div>

      <!-- PREVIEW / INFO -->
      <div class="contact-section subtle">
        <div class="contact-preview">
          <div class="preview-avatar"></div>
          <div class="preview-text">
            <span>No user selected</span>
            <small>User preview will appear here</small>
          </div>
        </div>
      </div>

      <!-- ACTION -->
      <div class="contact-section">
        <button class="contact-action-btn">
          Send Contact Request
        </button>
      </div>

    </div>

  </div>

</div>

<div id="callScreen" class="call-screen hidden">
  <div class="call-content">

    <div class="call-avatar"></div>

    <div class="call-name"></div>
    <div class="call-status"></div>

    <div class="call-actions">

      <button id="callMuteBtn" class="call-btn secondary">
        Mute
      </button>

      <button id="callAcceptBtn" class="call-btn accept hidden">
        Accept
      </button>

      <button id="callEndBtn" class="call-btn end">
        End
      </button>

    </div>

  </div>
</div>

<div id="callScreen" class="call-screen hidden">
  <div class="call-content">

    <div class="call-avatar"></div>

    <div class="call-name">Contact Name</div>
    <div class="call-status">Callingâ€¦</div>

    <div class="call-actions">
      <button class="call-btn secondary">ğŸ”‡</button>
      <button id="callAcceptBtn" class="call-btn accept hidden">
        ğŸ“
      </button>
      <button class="call-btn end">â›”</button>
    </div>

  </div>
</div>




  <audio id="remoteAudio" autoplay></audio>
  <script src="app.js"></script>
</body>
</html>
